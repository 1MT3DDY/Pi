{% extends "layouts/base.html" %}

{% block content %}
<div class="container mt-4 mb-5" style="max-width: 700px;">
    <!-- Header con progreso -->
    <div class="mb-5">
        <h2 class="mb-3" style="color: #2c3e50; font-weight: 700; font-size: 1.8rem;">Pregunta {{ idx|add:1 }} de {{ total }}</h2>
        <div class="progress" style="height: 10px; border-radius: 8px; background-color: #ecf0f1;">
            <div class="progress-bar" role="progressbar" style="width: {{ progress_percent }}%; background: linear-gradient(90deg, #27ae60, #2ecc71); border-radius: 8px;" aria-valuenow="{{ idx|add:1 }}" aria-valuemin="0" aria-valuemax="{{ total }}"></div>
        </div>
    </div>

    <!-- Pregunta y opciones -->
    <form method="post">
        {% csrf_token %}
        <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
            <h4 class="mb-5" style="color: #2c3e50; font-size: 1.2rem; font-weight: 600; line-height: 1.6;">
                {{ pregunta.pregunta }}
            </h4>
            
            <div style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 30px;">
                <label style="display: flex; align-items: center; padding: 16px; border: 2px solid #ecf0f1; border-radius: 8px; background-color: #f9fafb; cursor: pointer; transition: all 0.25s ease;">
                    <input type="radio" name="respuesta" value="1" {% if selected == '1' %}checked{% endif %} required style="cursor: pointer; width: 20px; height: 20px; margin-right: 15px; flex-shrink: 0;">
                    <span style="color: #2c3e50; font-weight: 500; flex-grow: 1;">{{ pregunta.opcion_1 }}</span>
                </label>
                
                <label style="display: flex; align-items: center; padding: 16px; border: 2px solid #ecf0f1; border-radius: 8px; background-color: #f9fafb; cursor: pointer; transition: all 0.25s ease;">
                    <input type="radio" name="respuesta" value="2" {% if selected == '2' %}checked{% endif %} style="cursor: pointer; width: 20px; height: 20px; margin-right: 15px; flex-shrink: 0;">
                    <span style="color: #2c3e50; font-weight: 500; flex-grow: 1;">{{ pregunta.opcion_2 }}</span>
                </label>
                
                <label style="display: flex; align-items: center; padding: 16px; border: 2px solid #ecf0f1; border-radius: 8px; background-color: #f9fafb; cursor: pointer; transition: all 0.25s ease;">
                    <input type="radio" name="respuesta" value="3" {% if selected == '3' %}checked{% endif %} style="cursor: pointer; width: 20px; height: 20px; margin-right: 15px; flex-shrink: 0;">
                    <span style="color: #2c3e50; font-weight: 500; flex-grow: 1;">{{ pregunta.opcion_3 }}</span>
                </label>
            </div>

            <div style="display: flex; gap: 12px; justify-content: space-between;">
                {% if idx > 0 %}
                <a href="{% url 'quiz_question' idx=idx|add:"-1" %}" style="padding: 12px 24px; font-weight: 600; border-radius: 8px; border: 2px solid #ecf0f1; background-color: white; color: #2c3e50; text-decoration: none; cursor: pointer; transition: all 0.25s ease;">← Anterior</a>
                {% else %}
                <a href="{% url 'index' %}" style="padding: 12px 24px; font-weight: 600; border-radius: 8px; border: 2px solid #ecf0f1; background-color: white; color: #2c3e50; text-decoration: none; cursor: pointer; transition: all 0.25s ease;">Cancelar</a>
                {% endif %}

                <button type="submit" style="padding: 12px 24px; font-weight: 600; border-radius: 8px; background-color: #3498db; color: white; border: none; cursor: pointer; transition: all 0.25s ease;">
                    {% if idx|add:"1" == total %}Enviar respuestas →{% else %}Siguiente →{% endif %}
                </button>
            </div>
        </div>
    </form>
</div>

<style>
    label:hover {
        border-color: #3498db !important;
        background-color: #f0f8ff !important;
    }
    
    input[type="radio"]:checked {
        accent-color: #3498db;
    }
    
    label:has(input:checked) {
        border-color: #3498db !important;
        background-color: #e8f4f8 !important;
    }
    
    label:has(input:checked) span {
        color: #3498db !important;
        font-weight: 700;
    }
    
    button:hover {
        background-color: #2980b9 !important;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
    }
    
    a:hover {
        border-color: #3498db !important;
        background-color: #f0f8ff !important;
        transform: translateY(-2px);
    }
</style>
{% endblock %}
